# ğŸ“ˆ Store Sales - Time Series Forecasting (Top 20% å®æˆ˜è§£æ)

![Python](https://img.shields.io/badge/Python-3.8%2B-blue)
![XGBoost](https://img.shields.io/badge/Model-XGBoost-orange)
![Score](https://img.shields.io/badge/Public_LB-0.46139-brightgreen)
![Status](https://img.shields.io/badge/Status-Completed-success)

## 1. é¡¹ç›®èƒŒæ™¯ (Overview)

æœ¬é¡¹ç›®æ˜¯ Kaggle ç»å…¸æ—¶é—´åºåˆ—ç«èµ› [Store Sales - Time Series Forecasting](https://www.kaggle.com/competitions/store-sales-time-series-forecasting) çš„å®Œæ•´è§£å†³æ–¹æ¡ˆã€‚

* **ä¸šåŠ¡åœºæ™¯ï¼š** é¢„æµ‹å„ç“œå¤šå°”å¤§å‹é›¶å”®å•† Favorita æ——ä¸‹ 54 å®¶å•†åº—åœ¨æœªæ¥ 16 å¤©çš„æ—¥é”€é‡ã€‚
* **éš¾ç‚¹ï¼š** æ•°æ®å—å¤šç§å¤–éƒ¨å› ç´ å½±å“ï¼ˆæ²¹ä»·æ³¢åŠ¨ã€åœ°æ–¹æ€§å‡æœŸã€å‘è–ªæ—¥æ•ˆåº”ï¼‰ï¼Œä¸”ä¸åŒå•†åº—ã€ä¸åŒå“ç±»çš„é”€å”®æ¨¡å¼å·®å¼‚å·¨å¤§ã€‚
* **æœ€ç»ˆæˆç»©ï¼š** RMSLE **0.46139** (Top 20%)ã€‚

---

## 2. æ ¸å¿ƒç­–ç•¥ä¸æ¼”è¿› (Strategy)

æˆ‘ä¸è¿½æ±‚ç›²ç›®çš„æ¨¡å‹å †å ï¼Œè€Œæ˜¯é‡‡ç”¨**å·¥ä¸šçº§ç‰¹å¾å·¥ç¨‹**çš„æ€è·¯ï¼Œé€šè¿‡â€œç†è§£æ•°æ®â€æ¥æå‡åˆ†æ•°ã€‚

| é˜¶æ®µ | æ–¹æ³• | éªŒè¯é›†åˆ†æ•° (RMSLE) | æå‡é€»è¾‘ |
| :--- | :--- | :--- | :--- |
| **Baseline** | çº¿æ€§å›å½’ (ä»…æ—¥æœŸç‰¹å¾) | 2.19 | æ¨¡å‹æ¬ æ‹Ÿåˆï¼Œæ— æ³•æ•æ‰éçº¿æ€§å…³ç³»ã€‚ |
| **V2** | XGBoost + å®è§‚æ•°æ® | 0.69 | å¼•å…¥æ²¹ä»·å’Œå•†åº—ä½ç½®ï¼Œç¡®ç«‹äº†åŸºç¡€æ ‘æ¨¡å‹æ¡†æ¶ã€‚ |
| **V3** | ç²¾ç»†åŒ–å‡æœŸåŒ¹é… | 0.68 | ä¿®æ­£äº†â€œæ‰€æœ‰å‡æœŸéƒ½å½±å“æ‰€æœ‰å•†åº—â€çš„é”™è¯¯é€»è¾‘ã€‚ |
| **V5** | **æ»åç‰¹å¾ (Lag Features)** | **0.5064** | **è´¨å˜ç‚¹ï¼š** æ•™ä¼šæ¨¡å‹ç†è§£â€œè¿‘æœŸè¶‹åŠ¿â€å’Œâ€œå†å²æƒ¯æ€§â€ã€‚ |

---

## 3. æŠ€æœ¯æ·±åº¦è§£æ (Technical Deep Dive)

ä»¥ä¸‹æ˜¯æœ¬é¡¹ç›®æœ€æ ¸å¿ƒçš„å››ä¸ªæŠ€æœ¯ç¯èŠ‚ï¼ŒåŒ…å«**ä»£ç å®ç°**ä¸**è®¾è®¡åŸç†**ã€‚

### 3.1 éªŒè¯é›†åˆ‡åˆ†ç­–ç•¥ (Time-Based Split)

åœ¨æ—¶é—´åºåˆ—ä¸­ï¼Œéšæœºåˆ‡åˆ†ï¼ˆRandom Splitï¼‰æ˜¯ä¸¥é‡çš„é”™è¯¯ï¼Œå› ä¸ºå®ƒä¼šå¯¼è‡´**æœªæ¥æ•°æ®æ³„éœ² (Data Leakage)**ã€‚æˆ‘ä¸¥æ ¼æŒ‰ç…§æ—¶é—´è½´è¿›è¡Œåˆ‡åˆ†ã€‚

* **è®­ç»ƒé›†ï¼š** 2013-01-01 è‡³ 2016-12-31
* **éªŒè¯é›†ï¼š** 2017-01-01 è‡³ 2017-08-15
* **æµ‹è¯•é›†ï¼š** 2017-08-16 è‡³ 2017-08-31

```python
# æ•°æ®åˆ‡åˆ†é€»è¾‘
# log1p: å¯¹é”€é‡åš Log å˜æ¢ï¼Œä½¿åˆ†å¸ƒæ›´æ¥è¿‘æ­£æ€ï¼Œä¸”ç¬¦åˆ RMSLE è¯„ä¼°æŒ‡æ ‡
y = np.log1p(train['sales'])

# ä¸¥æ ¼æŒ‰æ—¥æœŸåˆ‡åˆ†
train_mask = train['date'] < '2017-01-01'
val_mask = train['date'] >= '2017-01-01'

X_train = train.loc[train_mask, features]
X_val = train.loc[val_mask, features]
```python
# 3.1 ç»“å°¾çš„ä»£ç 
X_train = train.loc[train_mask, features]
X_val = train.loc[val_mask, features]
# 3.2 çš„ä»£ç ï¼šç²¾å‡†å‡æœŸåŒ¹é…é€»è¾‘
def apply_local_holidays(df, local_hols, merge_col):
    # å°†å‡æœŸè¡¨ä¸ä¸»è¡¨è¿›è¡Œå·¦è¿æ¥
    merged = df.merge(local_hols[['date', 'locale_name']], 
                      left_on=['date', merge_col], 
                      right_on=['date', 'locale_name'], 
                      how='left')
    # ... (åç»­ä»£ç )
